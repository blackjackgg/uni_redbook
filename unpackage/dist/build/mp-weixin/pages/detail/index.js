(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/detail/index"],{"2ac2":function(t,e,n){"use strict";n.r(e);var r=n("ec35"),a=n.n(r);for(var o in r)"default"!==o&&function(t){n.d(e,t,(function(){return r[t]}))}(o);e["default"]=a.a},5545:function(t,e,n){"use strict";var r=n("a7b3"),a=n.n(r);a.a},6764:function(t,e,n){"use strict";(function(t){n("adfe");r(n("66fd"));var e=r(n("87da"));function r(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},"87da":function(t,e,n){"use strict";n.r(e);var r=n("daf5"),a=n("2ac2");for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);n("5545");var i,s=n("f0c5"),u=Object(s["a"])(a["default"],r["b"],r["c"],!1,null,"7467b6b7",null,!1,r["a"],i);e["default"]=u.exports},a7b3:function(t,e,n){},daf5:function(t,e,n){"use strict";var r;n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return r}));var a=function(){var t=this,e=t.$createElement;t._self._c;t._isMounted||(t.e0=function(e){return e.stopPropagation(),t.$store.dispatch("changeUser",t.dataObj)})},o=[]},ec35:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=o(n("a34a")),a=n("2f62");function o(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n,r,a,o,i){try{var s=t[o](i),u=s.value}catch(c){return void n(c)}s.done?e(u):Promise.resolve(u).then(r,a)}function s(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function s(t){i(o,r,a,s,u,"next",t)}function u(t){i(o,r,a,s,u,"throw",t)}s(void 0)}))}}function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){l(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var f={data:function(){var t;return t={id:"",indicatorDots:!0,vertical:!1,autoplay:!1,interval:2e3,duration:500,dataObj:null,loading:!1,listsClose:!1,postParams:{id:"",key:""}},l(t,"loading",!1),l(t,"listsClose",!1),l(t,"lists",[]),l(t,"pagers",{page:1,rows:10,totalPages:1,count:0}),t},filters:{},computed:c({},(0,a.mapState)({userInfo:function(t){return t.userInfo},locationInfo:function(t){return t.locationInfo}})),components:{},methods:{lower:function(){if(this.listsClose)return!1;this.pagers.page+=1,this.getList()},sendComment:function(){var e=this;return s(r.default.mark((function n(){var a;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.postParams.key){n.next=3;break}return t.showToast({title:"请输入评论内容",icon:"none"}),n.abrupt("return",!1);case 3:return n.next=5,e.$request.post("/api/comment",e.postParams);case 5:a=n.sent,a.errno||(e.loading=!1,e.listsClose=!1,e.pagers.page=1,e.postParams.key="",e.getList()),t.showToast({title:"评论成功",icon:"none"});case 8:case"end":return n.stop()}}),n)})))()},changeFollow:function(t){var e=this;return s(r.default.mark((function n(){var a;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.$request.post("/api/users/follow",{pid:t.uid});case 2:a=n.sent,a.errno||e.getData();case 4:case"end":return n.stop()}}),n)})))()},changeMethod:function(t){var e=this;return s(r.default.mark((function n(){var a,o;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:a="",n.t0=t,n.next=1===n.t0?4:2===n.t0?6:8;break;case 4:return a="/api/works/collection",n.abrupt("break",8);case 6:return a="/api/works/like",n.abrupt("break",8);case 8:return n.next=10,e.$request.post(a,{id:e.dataObj.id,pid:e.dataObj.uid});case 10:o=n.sent,o.errno||e.getData(e.dataObj.id);case 12:case"end":return n.stop()}}),n)})))()},getData:function(){var t=this;return s(r.default.mark((function e(){var n;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$request.get("/api/works/detail",{id:t.id});case 2:n=e.sent,n.errno||(t.dataObj=n.data);case 4:case"end":return e.stop()}}),e)})))()},getList:function(){var t=this;return s(r.default.mark((function e(){var n;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$request.get("/api/comment",c({id:t.id},t.pagers));case 2:n=e.sent,n.errno||(1==t.pagers.page&&(t.lists=[]),n.data.currentPage>=n.data.totalPages&&(t.listsClose=!0),t.lists=t.lists.concat(n.data.data),t.pagers.count=n.data.count,t.pagers.page=n.data.currentPage,t.pagers.totalPages=n.data.totalPages),t.loading=!1;case 5:case"end":return e.stop()}}),e)})))()}},created:function(){},onLoad:function(t){this.id=t.id,this.postParams.id=t.id},onShow:function(){var e=this;return s(r.default.mark((function n(){return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.showShareMenu(),e.getData(),e.getList();case 3:case"end":return n.stop()}}),n)})))()},onShareAppMessage:function(t){return"button"===t.from&&console.log("button"),{title:this.dataObj.title,path:"pages/detail/main?id=".concat(this.dataObj.id),success:function(t){console.log("转发成功:"+JSON.stringify(t))},fail:function(t){console.log("转发失败:"+JSON.stringify(t))}}}};e.default=f}).call(this,n("543d")["default"])}},[["6764","common/runtime","common/vendor"]]]);